"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/userinfo";
exports.ids = ["pages/api/userinfo"];
exports.modules = {

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "(api)/./lib/admin/init.ts":
/*!***************************!*\
  !*** ./lib/admin/init.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ initializeApi)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\nlet apiInitialized = false;\n//This path is a JSON object for the Firebase service account's private key\n// let servAcc = require('../../private_keys/acmutd-hackportal-firebase-adminsdk-ev404-afcb7fdeb3.json');\n/**\n * Initializes all services used to power API routes.\n *\n * Each API's route should must call this function before the handler takes\n * over. To add more services to the back-end API like database services or\n * other middleware, those services should be called in this function.\n */ function initializeApi() {\n    if (apiInitialized) {\n        return;\n    }\n    // Put API initializations here.\n    initializeFirebase();\n    apiInitialized = true;\n};\n/**\n * Initializes Firebase admin APIs using environment variables.\n */ function initializeFirebase() {\n    if ((firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().apps.length) < 1) {\n        firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().initializeApp({\n            credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().credential.cert({\n                projectId: process.env.SERVICE_ACCOUNT_PROJECT_ID,\n                clientEmail: process.env.SERVICE_ACCOUNT_CLIENT_EMAIL,\n                privateKey: process.env.SERVICE_ACCOUNT_PRIVATE_KEY.replace(/\\\\n/g, \"\\n\")\n            })\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYWRtaW4vaW5pdC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUM7QUFFbkMsSUFBSUMsY0FBYyxHQUFHLEtBQUs7QUFDMUIsMkVBQTJFO0FBQzNFLHlHQUF5RztBQUV6Rzs7Ozs7O0NBTUMsR0FDYyxTQUFTQyxhQUFhLEdBQUc7SUFDdEMsSUFBSUQsY0FBYyxFQUFFO1FBQ2xCLE9BQU87S0FDUjtJQUNELGdDQUFnQztJQUNoQ0Usa0JBQWtCLEVBQUUsQ0FBQztJQUVyQkYsY0FBYyxHQUFHLElBQUksQ0FBQztDQUN2QjtBQUVEOztDQUVDLEdBQ0QsU0FBU0Usa0JBQWtCLEdBQUc7SUFDNUIsSUFBSUgsbUVBQWlCLEdBQUcsQ0FBQyxFQUFFO1FBQ3pCQSxtRUFBbUIsQ0FBQztZQUNsQk8sVUFBVSxFQUFFUCxxRUFBcUIsQ0FBQztnQkFDaENTLFNBQVMsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLDBCQUEwQjtnQkFDakRDLFdBQVcsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNHLDRCQUE0QjtnQkFDckRDLFVBQVUsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLDJCQUEyQixDQUFDQyxPQUFPLFNBQVMsSUFBSSxDQUFDO2FBQzFFLENBQUM7U0FDSCxDQUFDLENBQUM7S0FDSjtDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFja3BvcnRhbC8uL2xpYi9hZG1pbi9pbml0LnRzP2RmOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkbWluIGZyb20gJ2ZpcmViYXNlLWFkbWluJztcblxubGV0IGFwaUluaXRpYWxpemVkID0gZmFsc2U7XG4vL1RoaXMgcGF0aCBpcyBhIEpTT04gb2JqZWN0IGZvciB0aGUgRmlyZWJhc2Ugc2VydmljZSBhY2NvdW50J3MgcHJpdmF0ZSBrZXlcbi8vIGxldCBzZXJ2QWNjID0gcmVxdWlyZSgnLi4vLi4vcHJpdmF0ZV9rZXlzL2FjbXV0ZC1oYWNrcG9ydGFsLWZpcmViYXNlLWFkbWluc2RrLWV2NDA0LWFmY2I3ZmRlYjMuanNvbicpO1xuXG4vKipcbiAqIEluaXRpYWxpemVzIGFsbCBzZXJ2aWNlcyB1c2VkIHRvIHBvd2VyIEFQSSByb3V0ZXMuXG4gKlxuICogRWFjaCBBUEkncyByb3V0ZSBzaG91bGQgbXVzdCBjYWxsIHRoaXMgZnVuY3Rpb24gYmVmb3JlIHRoZSBoYW5kbGVyIHRha2VzXG4gKiBvdmVyLiBUbyBhZGQgbW9yZSBzZXJ2aWNlcyB0byB0aGUgYmFjay1lbmQgQVBJIGxpa2UgZGF0YWJhc2Ugc2VydmljZXMgb3JcbiAqIG90aGVyIG1pZGRsZXdhcmUsIHRob3NlIHNlcnZpY2VzIHNob3VsZCBiZSBjYWxsZWQgaW4gdGhpcyBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdGlhbGl6ZUFwaSgpIHtcbiAgaWYgKGFwaUluaXRpYWxpemVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIFB1dCBBUEkgaW5pdGlhbGl6YXRpb25zIGhlcmUuXG4gIGluaXRpYWxpemVGaXJlYmFzZSgpO1xuXG4gIGFwaUluaXRpYWxpemVkID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBGaXJlYmFzZSBhZG1pbiBBUElzIHVzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZUZpcmViYXNlKCkge1xuICBpZiAoYWRtaW4uYXBwcy5sZW5ndGggPCAxKSB7XG4gICAgYWRtaW4uaW5pdGlhbGl6ZUFwcCh7XG4gICAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoe1xuICAgICAgICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LlNFUlZJQ0VfQUNDT1VOVF9QUk9KRUNUX0lELFxuICAgICAgICBjbGllbnRFbWFpbDogcHJvY2Vzcy5lbnYuU0VSVklDRV9BQ0NPVU5UX0NMSUVOVF9FTUFJTCxcbiAgICAgICAgcHJpdmF0ZUtleTogcHJvY2Vzcy5lbnYuU0VSVklDRV9BQ0NPVU5UX1BSSVZBVEVfS0VZLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiYWRtaW4iLCJhcGlJbml0aWFsaXplZCIsImluaXRpYWxpemVBcGkiLCJpbml0aWFsaXplRmlyZWJhc2UiLCJhcHBzIiwibGVuZ3RoIiwiaW5pdGlhbGl6ZUFwcCIsImNyZWRlbnRpYWwiLCJjZXJ0IiwicHJvamVjdElkIiwicHJvY2VzcyIsImVudiIsIlNFUlZJQ0VfQUNDT1VOVF9QUk9KRUNUX0lEIiwiY2xpZW50RW1haWwiLCJTRVJWSUNFX0FDQ09VTlRfQ0xJRU5UX0VNQUlMIiwicHJpdmF0ZUtleSIsIlNFUlZJQ0VfQUNDT1VOVF9QUklWQVRFX0tFWSIsInJlcGxhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/admin/init.ts\n");

/***/ }),

/***/ "(api)/./pages/api/userinfo.tsx":
/*!********************************!*\
  !*** ./pages/api/userinfo.tsx ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handleScanTypes)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_admin_init__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/admin/init */ \"(api)/./lib/admin/init.ts\");\n\n\n(0,_lib_admin_init__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\nconst db = (0,firebase_admin__WEBPACK_IMPORTED_MODULE_0__.firestore)();\nconst REGISTRATION_COLLECTION = \"/registrations\";\nasync function userIsAuthorized(token, queryId) {\n    if (!token) return false;\n    try {\n        const payload = await (0,firebase_admin__WEBPACK_IMPORTED_MODULE_0__.auth)().verifyIdToken(token);\n        if (payload.uid === queryId) return true;\n        const snapshot = await (0,firebase_admin__WEBPACK_IMPORTED_MODULE_0__.firestore)().collection(REGISTRATION_COLLECTION).where(\"id\", \"==\", payload.uid).get();\n        if (snapshot.empty) return false;\n        for (let userRole of snapshot.docs[0].data().user.permissions){\n            if (userRole === \"super_admin\") return true;\n        }\n        return false;\n    } catch (error) {\n        console.error(error);\n        return false;\n    }\n}\n/**\n * Handles GET requests to /api/scantypes.\n *\n * This returns all scantypes the user is authorized to see.\n *\n * @param req The HTTP request\n * @param res The HTTP response\n */ async function handleUserInfo(req, res) {\n    // TODO: Handle user authorization\n    const { query: { token , id  } , headers ,  } = req;\n    //\n    // Check if request header contains token\n    // TODO: Figure out how to handle the string | string[] mess.\n    const userToken = token || headers[\"authorization\"];\n    // TODO: Extract from bearer token\n    // Probably not safe\n    const isAuthorized = await userIsAuthorized(userToken, id);\n    if (!isAuthorized) {\n        return res.status(401).send({\n            type: \"request-unauthorized\",\n            message: \"Request is not authorized to perform admin functionality.\"\n        });\n    }\n    const userID = id;\n    try {\n        const snapshot = await db.collection(REGISTRATION_COLLECTION).doc(userID).get();\n        if (!snapshot.exists) return res.status(404).json({\n            code: \"not found\",\n            message: \"User doesn't exist...\"\n        });\n        res.status(200).json(snapshot.data());\n    } catch (error) {\n        console.error(\"Error when fetching applications\", error);\n        res.status(500).json({\n            code: \"internal-error\",\n            message: \"Something went wrong when processing this request. Try again later.\"\n        });\n    }\n}\n/**\n * Fetches scantype data.\n *\n * Corresponds to /api/scantypes route.\n */ async function handleScanTypes(req, res) {\n    const { method  } = req;\n    if (method === \"GET\") {\n        handleUserInfo(req, res);\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"POST\"\n        ]);\n        res.status(405).end(`Method ${method} Not Allowed`);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVBLEtBQUssQ0FBQyxDQUFDO1FBQ3pESSxHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ08sSUFBSSxDQUFDO1lBQ25CQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3RCTCxPQUFPLEVBQUUscUVBQXFFO1NBQy9FLENBQUMsQ0FBQztLQUNKO0NBQ0Y7QUFJRDs7OztDQUlDLEdBQ2MsZUFBZU0sZUFBZSxDQUMzQ2hCLEdBQW1CLEVBQ25CQyxHQUEwQyxFQUMxQztJQUNBLE1BQU0sRUFBRWdCLE1BQU0sR0FBRSxHQUFHakIsR0FBRztJQUV0QixJQUFJaUIsTUFBTSxLQUFLLEtBQUssRUFBRTtRQUNwQmxCLGNBQWMsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLENBQUMsQ0FBQztLQUMxQixNQUFNO1FBQ0xBLEdBQUcsQ0FBQ2lCLFNBQVMsQ0FBQyxPQUFPLEVBQUU7WUFBQyxLQUFLO1lBQUUsTUFBTTtTQUFDLENBQUMsQ0FBQztRQUN4Q2pCLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDWSxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUVGLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0tBQ3JEO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWNrcG9ydGFsLy4vcGFnZXMvYXBpL3VzZXJpbmZvLnRzeD85MzIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IGF1dGgsIGZpcmVzdG9yZSB9IGZyb20gJ2ZpcmViYXNlLWFkbWluJztcbmltcG9ydCBpbml0aWFsaXplQXBpIGZyb20gJy4uLy4uL2xpYi9hZG1pbi9pbml0JztcblxuaW5pdGlhbGl6ZUFwaSgpO1xuXG5jb25zdCBkYiA9IGZpcmVzdG9yZSgpO1xuXG5jb25zdCBSRUdJU1RSQVRJT05fQ09MTEVDVElPTiA9ICcvcmVnaXN0cmF0aW9ucyc7XG5cbmFzeW5jIGZ1bmN0aW9uIHVzZXJJc0F1dGhvcml6ZWQodG9rZW46IHN0cmluZywgcXVlcnlJZDogc3RyaW5nKSB7XG4gIGlmICghdG9rZW4pIHJldHVybiBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgYXV0aCgpLnZlcmlmeUlkVG9rZW4odG9rZW4pO1xuICAgIGlmIChwYXlsb2FkLnVpZCA9PT0gcXVlcnlJZCkgcmV0dXJuIHRydWU7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBmaXJlc3RvcmUoKVxuICAgICAgLmNvbGxlY3Rpb24oUkVHSVNUUkFUSU9OX0NPTExFQ1RJT04pXG4gICAgICAud2hlcmUoJ2lkJywgJz09JywgcGF5bG9hZC51aWQpXG4gICAgICAuZ2V0KCk7XG4gICAgaWYgKHNuYXBzaG90LmVtcHR5KSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgdXNlclJvbGUgb2Ygc25hcHNob3QuZG9jc1swXS5kYXRhKCkudXNlci5wZXJtaXNzaW9ucyBhcyBzdHJpbmdbXSkge1xuICAgICAgaWYgKHVzZXJSb2xlID09PSAnc3VwZXJfYWRtaW4nKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgR0VUIHJlcXVlc3RzIHRvIC9hcGkvc2NhbnR5cGVzLlxuICpcbiAqIFRoaXMgcmV0dXJucyBhbGwgc2NhbnR5cGVzIHRoZSB1c2VyIGlzIGF1dGhvcml6ZWQgdG8gc2VlLlxuICpcbiAqIEBwYXJhbSByZXEgVGhlIEhUVFAgcmVxdWVzdFxuICogQHBhcmFtIHJlcyBUaGUgSFRUUCByZXNwb25zZVxuICovXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVVc2VySW5mbyhyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICAvLyBUT0RPOiBIYW5kbGUgdXNlciBhdXRob3JpemF0aW9uXG4gIGNvbnN0IHtcbiAgICBxdWVyeTogeyB0b2tlbiwgaWQgfSxcbiAgICBoZWFkZXJzLFxuICB9ID0gcmVxO1xuXG4gIC8vXG4gIC8vIENoZWNrIGlmIHJlcXVlc3QgaGVhZGVyIGNvbnRhaW5zIHRva2VuXG4gIC8vIFRPRE86IEZpZ3VyZSBvdXQgaG93IHRvIGhhbmRsZSB0aGUgc3RyaW5nIHwgc3RyaW5nW10gbWVzcy5cbiAgY29uc3QgdXNlclRva2VuID0gKHRva2VuIGFzIHN0cmluZykgfHwgKGhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSBhcyBzdHJpbmcpO1xuXG4gIC8vIFRPRE86IEV4dHJhY3QgZnJvbSBiZWFyZXIgdG9rZW5cbiAgLy8gUHJvYmFibHkgbm90IHNhZmVcbiAgY29uc3QgaXNBdXRob3JpemVkID0gYXdhaXQgdXNlcklzQXV0aG9yaXplZCh1c2VyVG9rZW4sIGlkIGFzIHN0cmluZyk7XG4gIGlmICghaXNBdXRob3JpemVkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcbiAgICAgIHR5cGU6ICdyZXF1ZXN0LXVuYXV0aG9yaXplZCcsXG4gICAgICBtZXNzYWdlOiAnUmVxdWVzdCBpcyBub3QgYXV0aG9yaXplZCB0byBwZXJmb3JtIGFkbWluIGZ1bmN0aW9uYWxpdHkuJyxcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHVzZXJJRCA9IGlkIGFzIHN0cmluZztcblxuICB0cnkge1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZGIuY29sbGVjdGlvbihSRUdJU1RSQVRJT05fQ09MTEVDVElPTikuZG9jKHVzZXJJRCkuZ2V0KCk7XG4gICAgaWYgKCFzbmFwc2hvdC5leGlzdHMpXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBjb2RlOiAnbm90IGZvdW5kJywgbWVzc2FnZTogXCJVc2VyIGRvZXNuJ3QgZXhpc3QuLi5cIiB9KTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihzbmFwc2hvdC5kYXRhKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoZW4gZmV0Y2hpbmcgYXBwbGljYXRpb25zJywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGNvZGU6ICdpbnRlcm5hbC1lcnJvcicsXG4gICAgICBtZXNzYWdlOiAnU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hlbiBwcm9jZXNzaW5nIHRoaXMgcmVxdWVzdC4gVHJ5IGFnYWluIGxhdGVyLicsXG4gICAgfSk7XG4gIH1cbn1cblxudHlwZSBBcHBsaWNhdGlvbnNSZXNwb25zZSA9IHt9O1xuXG4vKipcbiAqIEZldGNoZXMgc2NhbnR5cGUgZGF0YS5cbiAqXG4gKiBDb3JyZXNwb25kcyB0byAvYXBpL3NjYW50eXBlcyByb3V0ZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2NhblR5cGVzKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZTxBcHBsaWNhdGlvbnNSZXNwb25zZT4sXG4pIHtcbiAgY29uc3QgeyBtZXRob2QgfSA9IHJlcTtcblxuICBpZiAobWV0aG9kID09PSAnR0VUJykge1xuICAgIGhhbmRsZVVzZXJJbmZvKHJlcSwgcmVzKTtcbiAgfSBlbHNlIHtcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJywgJ1BPU1QnXSk7XG4gICAgcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7bWV0aG9kfSBOb3QgQWxsb3dlZGApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiYXV0aCIsImZpcmVzdG9yZSIsImluaXRpYWxpemVBcGkiLCJkYiIsIlJFR0lTVFJBVElPTl9DT0xMRUNUSU9OIiwidXNlcklzQXV0aG9yaXplZCIsInRva2VuIiwicXVlcnlJZCIsInBheWxvYWQiLCJ2ZXJpZnlJZFRva2VuIiwidWlkIiwic25hcHNob3QiLCJjb2xsZWN0aW9uIiwid2hlcmUiLCJnZXQiLCJlbXB0eSIsInVzZXJSb2xlIiwiZG9jcyIsImRhdGEiLCJ1c2VyIiwicGVybWlzc2lvbnMiLCJlcnJvciIsImNvbnNvbGUiLCJoYW5kbGVVc2VySW5mbyIsInJlcSIsInJlcyIsInF1ZXJ5IiwiaWQiLCJoZWFkZXJzIiwidXNlclRva2VuIiwiaXNBdXRob3JpemVkIiwic3RhdHVzIiwic2VuZCIsInR5cGUiLCJtZXNzYWdlIiwidXNlcklEIiwiZG9jIiwiZXhpc3RzIiwianNvbiIsImNvZGUiLCJoYW5kbGVTY2FuVHlwZXMiLCJtZXRob2QiLCJzZXRIZWFkZXIiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/userinfo.tsx\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/userinfo.tsx"));
module.exports = __webpack_exports__;

})();